{"ast":null,"code":"function getSession() {\n  const token = JSON.parse(sessionStorage.getItem(\"token\"));\n  const cbid = JSON.parse(sessionStorage.getItem(\"cbid\"));\n  return {\n    token,\n    cbid\n  };\n}\n\nexport async function getUser() {\n  const browserData = getSession();\n  const requestOptions = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${browserData.token}`\n    }\n  };\n  const response = await fetch(`${process.env.REACT_APP_HOST}/600/users/${browserData.cbid}`, requestOptions);\n\n  if (!response.ok) {\n    throw {\n      message: response.statusText,\n      status: response.status\n    }; //eslint-disable-line\n  }\n\n  const data = await response.json();\n  return data;\n}\nexport async function getUserOrders() {\n  const browserData = getSession();\n  const requestOptions = {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${browserData.token}`\n    }\n  };\n  const response = await fetch(`${process.env.REACT_APP_HOST}/660/orders?user.id=${browserData.cbid}`, requestOptions);\n\n  if (!response.ok) {\n    throw {\n      message: response.statusText,\n      status: response.status\n    }; //eslint-disable-line\n  }\n\n  const data = await response.json();\n  return data;\n}\nexport async function createOrder(cartList, total, user) {\n  const browserData = getSession();\n  const order = {\n    cartList: cartList,\n    amount_paid: total,\n    quantity: cartList.length,\n    user: {\n      name: user.name,\n      email: user.email,\n      id: user.id\n    }\n  };\n  const requestOptions = {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${browserData.token}`\n    },\n    body: JSON.stringify(order)\n  };\n  const response = await fetch(`${process.env.REACT_APP_HOST}/660/orders`, requestOptions);\n\n  if (!response.ok) {\n    throw {\n      message: response.statusText,\n      status: response.status\n    }; //eslint-disable-line\n  }\n\n  const data = await response.json();\n  return data;\n}","map":{"version":3,"names":["getSession","token","JSON","parse","sessionStorage","getItem","cbid","getUser","browserData","requestOptions","method","headers","Authorization","response","fetch","process","env","REACT_APP_HOST","ok","message","statusText","status","data","json","getUserOrders","createOrder","cartList","total","user","order","amount_paid","quantity","length","name","email","id","body","stringify"],"sources":["/Users/williampeoples/Desktop/ReactCourse/projects/shopmate/codebook/src/services/dataService.js"],"sourcesContent":["function getSession(){\r\n    const token = JSON.parse(sessionStorage.getItem(\"token\"));\r\n    const cbid = JSON.parse(sessionStorage.getItem(\"cbid\"));\r\n    return {token, cbid};\r\n}\r\n\r\nexport async function getUser(){\r\n    const browserData = getSession();\r\n    const requestOptions = {\r\n        method: \"GET\",\r\n        headers: {\"Content-Type\": \"application/json\", Authorization: `Bearer ${browserData.token}`}\r\n    }\r\n    const response = await fetch(`${process.env.REACT_APP_HOST}/600/users/${browserData.cbid}`, requestOptions);\r\n    if(!response.ok){\r\n        throw { message: response.statusText, status: response.status }; //eslint-disable-line\r\n    }\r\n    const data = await response.json();\r\n    return data;\r\n}\r\n\r\nexport async function getUserOrders(){\r\n    const browserData = getSession();\r\n    const requestOptions = {\r\n        method: \"GET\",\r\n        headers: {\"Content-Type\": \"application/json\", Authorization: `Bearer ${browserData.token}`}\r\n    }\r\n    const response = await fetch(`${process.env.REACT_APP_HOST}/660/orders?user.id=${browserData.cbid}`, requestOptions);\r\n    if(!response.ok){\r\n        throw { message: response.statusText, status: response.status }; //eslint-disable-line\r\n    }\r\n    const data = await response.json();\r\n    return data;\r\n}\r\n\r\nexport async function createOrder(cartList, total, user){\r\n    const browserData = getSession();\r\n    const order = {\r\n        cartList: cartList,\r\n        amount_paid: total,\r\n        quantity: cartList.length,\r\n        user: {\r\n            name: user.name,\r\n            email: user.email,\r\n            id: user.id\r\n        }\r\n    }\r\n    const requestOptions = {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\", Authorization: `Bearer ${browserData.token}` },\r\n        body: JSON.stringify(order)\r\n    }\r\n    const response = await fetch(`${process.env.REACT_APP_HOST}/660/orders`, requestOptions);\r\n    if(!response.ok){\r\n        throw { message: response.statusText, status: response.status }; //eslint-disable-line\r\n    }\r\n    const data = await response.json();\r\n    return data;\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}