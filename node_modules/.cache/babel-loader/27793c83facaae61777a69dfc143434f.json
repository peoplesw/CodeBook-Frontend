{"ast":null,"code":"export async function login(authDetail) {\n  const requestOptions = {\n    method: \"POST\",\n    headers: {\n      \"content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(authDetail)\n  };\n  const response = await fetch(`${process.env.REACT_APP_HOST}/login`, requestOptions);\n\n  if (!response.ok) {\n    throw {\n      message: response.statusText,\n      status: response.status\n    }; //eslint-disable-line\n  }\n\n  const data = await response.json();\n\n  if (data.accessToken) {\n    sessionStorage.setItem(\"token\", JSON.stringify(data.accessToken));\n    sessionStorage.setItem(\"cbid\", JSON.stringify(data.user.id));\n  }\n\n  return data;\n}\nexport async function register(authDetail) {\n  const requestOptions = {\n    method: \"POST\",\n    headers: {\n      \"content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(authDetail)\n  };\n  const response = await fetch(`${process.env.REACT_APP_HOST}/register`, requestOptions);\n\n  if (!response.ok) {\n    throw {\n      message: response.statusText,\n      status: response.status\n    }; //eslint-disable-line\n  }\n\n  const data = await response.json();\n\n  if (data.accessToken) {\n    sessionStorage.setItem(\"token\", JSON.stringify(data.accessToken));\n    sessionStorage.setItem(\"cbid\", JSON.stringify(data.user.id));\n  }\n\n  return data;\n}\nexport function logout() {\n  sessionStorage.removeItem(\"token\");\n  sessionStorage.removeItem(\"cbid\");\n}","map":{"version":3,"names":["login","authDetail","requestOptions","method","headers","body","JSON","stringify","response","fetch","process","env","REACT_APP_HOST","ok","message","statusText","status","data","json","accessToken","sessionStorage","setItem","user","id","register","logout","removeItem"],"sources":["/Users/williampeoples/Desktop/ReactCourse/projects/shopmate/codebook/src/services/authService.js"],"sourcesContent":["export async function login(authDetail){\r\n    const requestOptions = {\r\n        method: \"POST\",\r\n        headers: {\"content-Type\": \"application/json\"},\r\n        body: JSON.stringify(authDetail)\r\n    }\r\n    const response = await fetch(`${process.env.REACT_APP_HOST}/login`, requestOptions);\r\n    if(!response.ok){\r\n        throw { message: response.statusText, status: response.status }; //eslint-disable-line\r\n    }\r\n    const data = await response.json();\r\n\r\n    if(data.accessToken){\r\n        sessionStorage.setItem(\"token\", JSON.stringify(data.accessToken));\r\n        sessionStorage.setItem(\"cbid\", JSON.stringify(data.user.id));\r\n    }\r\n\r\n    return data;\r\n}\r\n\r\nexport async function register(authDetail){\r\n    const requestOptions = {\r\n        method: \"POST\",\r\n        headers: {\"content-Type\": \"application/json\"},\r\n        body: JSON.stringify(authDetail)\r\n    }  \r\n    const response = await fetch(`${process.env.REACT_APP_HOST}/register`, requestOptions);\r\n    if(!response.ok){\r\n        throw { message: response.statusText, status: response.status }; //eslint-disable-line\r\n    }\r\n    const data = await response.json();\r\n    \r\n    if(data.accessToken){\r\n        sessionStorage.setItem(\"token\", JSON.stringify(data.accessToken));\r\n        sessionStorage.setItem(\"cbid\", JSON.stringify(data.user.id));\r\n    }\r\n\r\n    return data;\r\n}\r\n\r\nexport function logout(){\r\n    sessionStorage.removeItem(\"token\");\r\n    sessionStorage.removeItem(\"cbid\");\r\n}"],"mappings":"AAAA,OAAO,eAAeA,KAAf,CAAqBC,UAArB,EAAgC;EACnC,MAAMC,cAAc,GAAG;IACnBC,MAAM,EAAE,MADW;IAEnBC,OAAO,EAAE;MAAC,gBAAgB;IAAjB,CAFU;IAGnBC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeN,UAAf;EAHa,CAAvB;EAKA,MAAMO,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEC,OAAO,CAACC,GAAR,CAAYC,cAAe,QAA/B,EAAwCV,cAAxC,CAA5B;;EACA,IAAG,CAACM,QAAQ,CAACK,EAAb,EAAgB;IACZ,MAAM;MAAEC,OAAO,EAAEN,QAAQ,CAACO,UAApB;MAAgCC,MAAM,EAAER,QAAQ,CAACQ;IAAjD,CAAN,CADY,CACqD;EACpE;;EACD,MAAMC,IAAI,GAAG,MAAMT,QAAQ,CAACU,IAAT,EAAnB;;EAEA,IAAGD,IAAI,CAACE,WAAR,EAAoB;IAChBC,cAAc,CAACC,OAAf,CAAuB,OAAvB,EAAgCf,IAAI,CAACC,SAAL,CAAeU,IAAI,CAACE,WAApB,CAAhC;IACAC,cAAc,CAACC,OAAf,CAAuB,MAAvB,EAA+Bf,IAAI,CAACC,SAAL,CAAeU,IAAI,CAACK,IAAL,CAAUC,EAAzB,CAA/B;EACH;;EAED,OAAON,IAAP;AACH;AAED,OAAO,eAAeO,QAAf,CAAwBvB,UAAxB,EAAmC;EACtC,MAAMC,cAAc,GAAG;IACnBC,MAAM,EAAE,MADW;IAEnBC,OAAO,EAAE;MAAC,gBAAgB;IAAjB,CAFU;IAGnBC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeN,UAAf;EAHa,CAAvB;EAKA,MAAMO,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEC,OAAO,CAACC,GAAR,CAAYC,cAAe,WAA/B,EAA2CV,cAA3C,CAA5B;;EACA,IAAG,CAACM,QAAQ,CAACK,EAAb,EAAgB;IACZ,MAAM;MAAEC,OAAO,EAAEN,QAAQ,CAACO,UAApB;MAAgCC,MAAM,EAAER,QAAQ,CAACQ;IAAjD,CAAN,CADY,CACqD;EACpE;;EACD,MAAMC,IAAI,GAAG,MAAMT,QAAQ,CAACU,IAAT,EAAnB;;EAEA,IAAGD,IAAI,CAACE,WAAR,EAAoB;IAChBC,cAAc,CAACC,OAAf,CAAuB,OAAvB,EAAgCf,IAAI,CAACC,SAAL,CAAeU,IAAI,CAACE,WAApB,CAAhC;IACAC,cAAc,CAACC,OAAf,CAAuB,MAAvB,EAA+Bf,IAAI,CAACC,SAAL,CAAeU,IAAI,CAACK,IAAL,CAAUC,EAAzB,CAA/B;EACH;;EAED,OAAON,IAAP;AACH;AAED,OAAO,SAASQ,MAAT,GAAiB;EACpBL,cAAc,CAACM,UAAf,CAA0B,OAA1B;EACAN,cAAc,CAACM,UAAf,CAA0B,MAA1B;AACH"},"metadata":{},"sourceType":"module"}